{"ast":null,"code":"var _interopRequireWildcard = require(\"/Users/mac/Developer/ReactNative/dessertReactNativeApp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\n\nvar _interopRequireDefault = require(\"/Users/mac/Developer/ReactNative/dessertReactNativeApp/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useNavigationState;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"/Users/mac/Developer/ReactNative/dessertReactNativeApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _useNavigation = _interopRequireDefault(require(\"./useNavigation\"));\n\nfunction useNavigationState(selector) {\n  var navigation = (0, _useNavigation.default)();\n\n  var _React$useState = React.useState(function () {\n    return selector(navigation.getState());\n  }),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      setResult = _React$useState2[1];\n\n  var selectorRef = React.useRef(selector);\n  React.useEffect(function () {\n    selectorRef.current = selector;\n  });\n  React.useEffect(function () {\n    var unsubscribe = navigation.addListener('state', function (e) {\n      setResult(selectorRef.current(e.data.state));\n    });\n    return unsubscribe;\n  }, [navigation]);\n  return selector(navigation.getState());\n}","map":{"version":3,"mappings":";;;;;;;;;;;AACA;;AAGA;;AAWe,SAASA,kBAAT,CACbC,QADa,EAEV;EACH,IAAMC,UAAU,GAAGC,6BAAnB;;EAIA,sBAAsBC,KAAK,CAACC,QAAND,CAAe;IAAA,OAAMH,QAAQ,CAACC,UAAU,CAACI,QAAXJ,EAAD,CAAd;EAAA,CAAfE,CAAtB;EAAA;EAAA,IAASG,SAAT;;EAGA,IAAMC,WAAW,GAAGJ,KAAK,CAACK,MAANL,CAAaH,QAAbG,CAApB;EAEAA,KAAK,CAACM,SAANN,CAAgB,YAAM;IACpBI,WAAW,CAACG,OAAZH,GAAsBP,QAAtBO;EADF;EAIAJ,KAAK,CAACM,SAANN,CAAgB,YAAM;IACpB,IAAMQ,WAAW,GAAGV,UAAU,CAACW,WAAXX,CAAuB,OAAvBA,EAAiCY,WAAD,EAAO;MACzDP,SAAS,CAACC,WAAW,CAACG,OAAZH,CAAoBM,CAAC,CAACC,IAAFD,CAAOE,KAA3BR,CAAD,CAATD;IADkB,EAApB;IAIA,OAAOK,WAAP;EALF,GAMG,CAACV,UAAD,CANHE;EAQA,OAAOH,QAAQ,CAACC,UAAU,CAACI,QAAXJ,EAAD,CAAf;AACD","names":["useNavigationState","selector","navigation","useNavigation","React","useState","getState","setResult","selectorRef","useRef","useEffect","current","unsubscribe","addListener","e","data","state"],"sources":["useNavigationState.tsx"],"sourcesContent":["import type { NavigationState, ParamListBase } from '@react-navigation/routers';\nimport * as React from 'react';\n\nimport type { NavigationProp } from './types';\nimport useNavigation from './useNavigation';\n\ntype Selector<ParamList extends ParamListBase, T> = (\n  state: NavigationState<ParamList>\n) => T;\n\n/**\n * Hook to get a value from the current navigation state using a selector.\n *\n * @param selector Selector function to get a value from the state.\n */\nexport default function useNavigationState<ParamList extends ParamListBase, T>(\n  selector: Selector<ParamList, T>\n): T {\n  const navigation = useNavigation<NavigationProp<ParamList>>();\n\n  // We don't care about the state value, we run the selector again at the end\n  // The state is only to make sure that there's a re-render when we have a new value\n  const [, setResult] = React.useState(() => selector(navigation.getState()));\n\n  // We store the selector in a ref to avoid re-subscribing listeners every render\n  const selectorRef = React.useRef(selector);\n\n  React.useEffect(() => {\n    selectorRef.current = selector;\n  });\n\n  React.useEffect(() => {\n    const unsubscribe = navigation.addListener('state', (e) => {\n      setResult(selectorRef.current(e.data.state));\n    });\n\n    return unsubscribe;\n  }, [navigation]);\n\n  return selector(navigation.getState());\n}\n"]},"metadata":{},"sourceType":"script"}